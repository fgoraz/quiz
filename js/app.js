(function(){"use strict";var e={8383:function(e,t,i){var n=i(9963),s=i(6252);const o={id:"app"};function r(e,t,i,n,r,a){const l=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(l,{realtime:r.realtime},null,8,["realtime"])])}var a=i(9350),l={name:"App",components:{},data(){return{realtime:null}},created(){this.realtime=new a.Realtime({authUrl:"/auth"})},unmounted(){this.realtime.connection.close()}},u=i(3744);const d=(0,u.Z)(l,[["render",r]]);var c=d,h=i(2201),m=i(3577);const w=e=>((0,s.dD)("data-v-60d91b2f"),e=e(),(0,s.Cn)(),e),y={key:0,class:"player-home card"},b={href:"https://www.ably.com/",target:"_blank"},p=["src"],g={key:0,class:"card-body"},k={class:"card-title"},v=w((()=>(0,s._)("p",{class:"card-text"},"We need a nickname so others can identify you",-1))),C={class:"nickname-input"},f={key:0},q=w((()=>(0,s._)("hr",null,null,-1))),z={class:"text-muted"},A=(0,s.Uk)("Waiting for your host, "),Q=(0,s.Uk)(", to start the quiz"),_={key:1,class:"card-body"},R=w((()=>(0,s._)("div",{class:"card-footer text-muted div-black"},[(0,s._)("a",{href:"https://github.com/Srushtika/realtime-quiz-framework",class:"link",target:"_blank"},"Learn how to build your own realtime quiz app with Ably →")],-1))),I={key:4,class:"live-stats"},P={key:5,class:"alert alert-danger alert-quiz-ended",role:"alert"},x=(0,s.Uk)(" This quiz has ended "),T=w((()=>(0,s._)("br",null,null,-1))),L=(0,s.Uk)("Either the host has ended it or they have simply left. Please request the host to share a new link. "),S=[x,T,L],N=w((()=>(0,s._)("div",{class:"quiz-end-player"}," This quiz has ended ",-1)));function D(e,t,i,o,r,a){const l=(0,s.up)("OnlinePlayers"),u=(0,s.up)("Question"),d=(0,s.up)("Answer"),c=(0,s.up)("Leaderboard"),h=(0,s.up)("LiveStats");return(0,s.wg)(),(0,s.iD)("div",null,[r.showQuestions?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("a",b,[(0,s._)("img",{src:r.headerImgLink,class:"card-img-top",alt:"Header image"},null,8,p)]),r.isRoomClosed?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("h5",k,"Hello "+(0,m.zw)(r.myNickname)+"!",1),r.didPlayerEnterRoom?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s.Wm)(l,{timer:r.timer,onlinePlayersArr:r.onlinePlayersArr,didHostStartGame:r.didHostStartGame},null,8,["timer","onlinePlayersArr","didHostStartGame"]),r.didHostStartGame?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",f,[q,(0,s._)("small",z,[A,(0,s._)("strong",null,(0,m.zw)(r.hostNickname),1),Q])]))],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[v,(0,s._)("div",C,[(0,s.wy)((0,s._)("input",{class:"form-control host-nickname",id:"host-nickname",placeholder:"Enter nickname","onUpdate:modelValue":t[0]||(t[0]=e=>r.myNickname=e),onKeyup:t[1]||(t[1]=(0,n.D2)((e=>a.enterRoomWithNickname()),["enter"]))},null,544),[[n.nr,r.myNickname]]),(0,s._)("button",{type:"button create-random-btn",class:"btn",onClick:t[2]||(t[2]=e=>a.enterRoomWithNickname())}," GO ")])],64))])),r.isRoomClosed?((0,s.wg)(),(0,s.iD)("div",_," Sorry this quiz room is no longer available to enter, either because the host is no longer online or the quiz has already started. ")):(0,s.kq)("",!0),R])),r.showQuestions&&!r.showAnswer?((0,s.wg)(),(0,s.j4)(u,{key:1,newQuestion:r.newQuestion,newChoices:r.newChoices,newQuestionNumber:r.newQuestionNumber,isLastQuestion:r.isLastQuestion,questionTimer:r.questionTimer,correctAnswerIndex:r.correctAnswerIndex,showImg:r.showImg,questionImgLink:r.questionImgLink,isAdminView:!1,myInputCh:e.myInputCh,onPlayerAnswer:t[3]||(t[3]=e=>a.playerAnswer(e))},null,8,["newQuestion","newChoices","newQuestionNumber","isLastQuestion","questionTimer","correctAnswerIndex","showImg","questionImgLink","myInputCh"])):(0,s.kq)("",!0),r.showAnswer?((0,s.wg)(),(0,s.j4)(d,{key:2,correctAnswer:r.newChoices[r.correctAnswerIndex],didAnswerCorrectly:r.didAnswerCorrectly,isAdminView:!1},null,8,["correctAnswer","didAnswerCorrectly"])):(0,s.kq)("",!0),r.showAnswer&&!r.showFinalScreen?((0,s.wg)(),(0,s.j4)(c,{key:3,leaderboard:r.leaderboard,finalScreen:!1,isPlayer:!0},null,8,["leaderboard"])):(0,s.kq)("",!0),!r.showAnswer&&r.showQuestions?((0,s.wg)(),(0,s.iD)("div",I,[(0,s.Wm)(h,{numAnswered:r.numAnswered,numPlaying:r.numPlaying},null,8,["numAnswered","numPlaying"])])):(0,s.kq)("",!0),r.didHostForceQuizEnd?((0,s.wg)(),(0,s.iD)("div",P,S)):(0,s.kq)("",!0),r.showFinalScreen?((0,s.wg)(),(0,s.iD)(s.HY,{key:6},[N,(0,s._)("div",null,[(0,s.Wm)(c,{isPlayer:!0,leaderboard:r.leaderboard,finalScreen:!0},null,8,["leaderboard"])])],64)):(0,s.kq)("",!0)])}i(7658);const H=e=>((0,s.dD)("data-v-665da564"),e=e(),(0,s.Cn)(),e),E={class:"card-header"},U={class:"question-div card-title"},W={key:0,class:"img-div"},G=["src"],j={key:2,class:"card-body"},O=H((()=>(0,s._)("h5",{class:"card-title"},null,-1))),Y={key:0,class:"choices-container"},F=["onClick"],V={key:1,class:"choices-container"},M={key:2,class:"submitted-msg"},B=H((()=>(0,s._)("h5",null," Your answer is submitted, waiting for everyone else to answer... ",-1))),Z=[B],$={key:3,class:"progress"};function K(e,t,i,n,o,r){const a=(0,s.up)("Answer");return(0,s.wg)(),(0,s.iD)("div",{class:(0,m.C_)(["card",o.viewType])},[(0,s._)("div",E,"Question "+(0,m.zw)(i.newQuestionNumber),1),(0,s._)("h2",U,(0,m.zw)(i.newQuestion),1),i.showImg?((0,s.wg)(),(0,s.iD)("div",W,[(0,s._)("img",{src:i.questionImgLink,class:"img-fluid q-img",alt:"Image for the question"},null,8,G)])):(0,s.kq)("",!0),i.showAnswer?((0,s.wg)(),(0,s.j4)(a,{key:1,correctAnswer:i.newChoices[i.correctAnswerIndex],isAdminView:!0},null,8,["correctAnswer"])):(0,s.kq)("",!0),i.showAnswer?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",j,[O,o.answerSubmitted||i.isAdminView?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.newChoices,((e,t)=>((0,s.wg)(),(0,s.iD)("button",{type:"button",class:"btn btn-outline-dark choice-btn",key:e,onClick:i=>r.sendMyAnswer(e,t)},(0,m.zw)(e),9,F)))),128))])),i.isAdminView?((0,s.wg)(),(0,s.iD)("div",V,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.newChoices,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"choice-div",key:e},(0,m.zw)(e),1)))),128))])):(0,s.kq)("",!0),o.answerSubmitted?((0,s.wg)(),(0,s.iD)("div",M,Z)):(0,s.kq)("",!0)])),i.isAdminView&&i.showAnswer?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",$,[(0,s._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-dark",role:"progressbar",style:(0,m.j5)({width:i.questionTimer/30*100+"%"}),"aria-valuemin":"0","aria-valuemax":"100"},(0,m.zw)(i.questionTimer),5)]))],2)}const J=e=>((0,s.dD)("data-v-10651dd2"),e=e(),(0,s.Cn)(),e),X={key:0,class:"answer-eval"},ee={key:1},te=J((()=>(0,s._)("h5",null,"The answer is",-1))),ie={class:"card-title answer-text"};function ne(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)("div",{class:(0,m.C_)(["card alert answer-div answer-card",o.cardColorClass])},[i.isAdminView?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",X,[(0,s._)("i",{class:(0,m.C_)(["fas",i.didAnswerCorrectly?"fa-check-circle":"fa-times-circle"])},null,2),(0,s.Uk)(" "+(0,m.zw)(o.evalMessage),1)])),i.isAdminView?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("hr",ee)),te,(0,s._)("h2",ie,(0,m.zw)(i.correctAnswer),1)],2)}var se={name:"Answer",props:["correctAnswer","isAdminView","didAnswerCorrectly"],data(){return{evalMessage:!0===this.didAnswerCorrectly?"Correct Answer":"Wrong Answer",cardColorClass:null,viewType:1==this.isAdminView?"answer-card-host":"answer-card-player"}},methods:{},created(){this.isAdminView?this.cardColorClass="alert-secondary":this.cardColorClass=this.didAnswerCorrectly?"alert-success":"alert-danger"}};const oe=(0,u.Z)(se,[["render",ne],["__scopeId","data-v-10651dd2"]]);var re=oe,ae={name:"Question",components:{Answer:re},props:["isAdminView","newQuestion","newChoices","newQuestionNumber","isLastQuestion","questionTimer","correctAnswerIndex","myInputCh","showImg","questionImgLink","showAnswer","correctAnswer"],data(){return{answerSubmitted:!1,viewType:1==this.isAdminView?"questions-card-host":"questions-card-player"}},methods:{sendMyAnswer(e,t){this.isAdminView||(this.answerSubmitted=!0,this.$emit("player-answer",{questionIndex:this.newQuestionNumber-1,playerAnswerIndex:t}),this.myInputCh.publish("player-answer",{questionIndex:this.newQuestionNumber-1,playerAnswerIndex:t,choice:e}))}}};const le=(0,u.Z)(ae,[["render",K],["__scopeId","data-v-665da564"]]);var ue=le;const de=e=>((0,s.dD)("data-v-2abb634e"),e=e(),(0,s.Cn)(),e),ce={key:0},he=de((()=>(0,s._)("h1",null,"Your quiz starts in",-1))),me={class:"display-3"},we=(0,s.Uk)(" You'll see other players as they join "),ye={class:"online-players"},be={class:"figure"},pe=de((()=>(0,s._)("i",{class:"fas fa-user-circle fa-3x"},null,-1))),ge={class:"figure-caption"};function ke(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)("div",null,[i.didHostStartGame?((0,s.wg)(),(0,s.iD)("div",ce,[he,(0,s._)("h1",me,(0,m.zw)(i.timer),1)])):(0,s.kq)("",!0),we,(0,s._)("div",ye,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.onlinePlayersArr,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.clientId,style:(0,m.j5)({color:e.avatarColor}),class:"player-avatar"},[(0,s._)("figure",be,[pe,(0,s._)("figcaption",ge,(0,m.zw)(e.nickname),1)])],4)))),128))])])}var ve={props:["timer","onlinePlayersArr","didHostStartGame"]};const Ce=(0,u.Z)(ve,[["render",ke],["__scopeId","data-v-2abb634e"]]);var fe=Ce;const qe=e=>((0,s.dD)("data-v-125d4578"),e=e(),(0,s.Cn)(),e),ze={class:"card text-white bg-dark mb-3 livestats-div"},Ae=qe((()=>(0,s._)("div",{class:"card-header"},"Live stats",-1))),Qe={class:"card-body"},_e={class:"card-title"};function Re(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)("div",ze,[Ae,(0,s._)("div",Qe,[(0,s._)("h5",_e,(0,m.zw)(i.numAnswered)+" of "+(0,m.zw)(i.numPlaying)+" people have answered this question ",1)])])}var Ie={name:"LiveStats",props:["numAnswered","numPlaying"]};const Pe=(0,u.Z)(Ie,[["render",Re],["__scopeId","data-v-125d4578"]]);var xe=Pe;const Te={class:"card-header"},Le={class:"card-body"},Se={class:"card-text"},Ne={key:0,class:"score-list"};function De(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)("div",{class:(0,m.C_)(["card text-white bg-success mb-3",{"leaderboard-host":!i.isPlayer,"leaderboard-player":i.isPlayer}])},[(0,s._)("div",Te,[(0,s._)("h3",null,(0,m.zw)(0==i.finalScreen?"Top 5 scorers":"Final Leaderboard"),1)]),(0,s._)("div",Le,[(0,s._)("p",Se,[i.leaderboard?((0,s.wg)(),(0,s.iD)("ol",Ne,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.leaderboard.slice(0,o.leaderNum),((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t,class:"score-item"},[(0,s._)("p",null,(0,m.zw)(e.nickname),1),(0,s._)("p",null,(0,m.zw)(e.score),1)])))),128))])):(0,s.kq)("",!0)])])],2)}var He={name:"Leaderboard",props:["leaderboard","finalScreen","isPlayer"],data(){return{leaderNum:this.finalScreen?this.leaderboard.length:5}},created(){console.log(this.isPlayer)}};const Ee=(0,u.Z)(He,[["render",De],["__scopeId","data-v-5c02cdb0"]]);var Ue=Ee,We=i(9669),Ge=i.n(We),je={name:"WaitingArea",props:["realtime"],components:{Question:ue,Answer:re,OnlinePlayers:fe,LiveStats:xe,Leaderboard:Ue},data(){return{isRoomClosed:null,quizRoomCode:null,myQuizRoomCh:null,headerImgLink:"https://user-images.githubusercontent.com/5900152/108396467-c713bc00-720e-11eb-95d8-a5f9e571b153.png",myNickname:"",myAvatarColor:null,didPlayerEnterRoom:!1,onlinePlayersArr:[],hostNickname:null,didHostStartGame:!1,timer:null,showQuestions:!1,newQuestion:null,newChoices:null,newQuestionNumber:null,isLastQuestion:null,questionTimer:30,correctAnswerIndex:null,showAnswer:!1,myClientId:null,didAnswerCorrectly:null,clickedPlayerQuestionIndex:null,clickedPlayerAnswerIndex:null,showImg:!1,questionImgLink:null,didHostForceQuizEnd:!1,numAnswered:0,numPlaying:0,leaderboard:null,showFinalScreen:!1}},methods:{subscribeToQuizRoomChEvents(){this.myQuizRoomCh.subscribe("new-player",(e=>{this.handleNewPlayerEntered(e)})),this.myQuizRoomCh.subscribe("start-quiz-timer",(e=>{this.didHostStartGame=!0,this.timer=e.data.countDownSec})),this.myQuizRoomCh.subscribe("new-question",(e=>{this.handleNewQuestionReceived(e)})),this.myQuizRoomCh.subscribe("question-timer",(e=>{this.questionTimer=e.data.countDownSec,this.questionTimer<0&&(this.questionTimer=30)})),this.myQuizRoomCh.subscribe("correct-answer",(e=>{this.handleCorrectAnswerReceived(e)})),this.myQuizRoomCh.subscribe("quiz-ending",(()=>{this.handleQuizEnding()})),this.myQuizRoomCh.subscribe("live-stats-update",(e=>{this.numAnswered=e.data.numAnswered,this.numPlaying=e.data.numPlaying})),this.myQuizRoomCh.subscribe("full-leaderboard",(e=>{this.leaderboard=e.data.leaderboard}))},handleNewPlayerEntered(e){let{clientId:t,nickname:i,avatarColor:n}=e.data.newPlayerState;this.onlinePlayersArr.push({clientId:t,nickname:i,avatarColor:n})},handleNewQuestionReceived(e){this.showQuestions=!0,this.showAnswer=!1,this.newQuestionNumber=e.data.questionNumber,this.newQuestion=e.data.question,this.newChoices=e.data.choices,this.isLastQuestion=e.data.isLastQuestion,this.showImg=e.data.showImg,this.questionImgLink=e.data.imgLink,this.numAnswered=e.data.numAnswered,this.numPlaying=e.data.numPlaying},handleCorrectAnswerReceived(e){this.newQuestionNumber==e.data.questionNumber&&(this.correctAnswerIndex=e.data.correctAnswerIndex,this.newQuestionNumber-1==this.clickedPlayerQuestionIndex&&this.clickedPlayerAnswerIndex==this.correctAnswerIndex?this.didAnswerCorrectly=!0:this.didAnswerCorrectly=!1,this.showAnswer=!0),this.isLastQuestion&&(this.showFinalScreen=!0)},handleQuizEnding(){this.didHostForceQuizEnd=!0},setUpMyChannel(){this.myClientId=this.realtime.auth.clientId,this.myInputCh=this.realtime.channels.get(`${this.quizRoomCode}:player-ch-${this.myClientId}`)},enterRoomWithNickname(){this.myQuizRoomCh.presence.enter({nickname:this.myNickname,avatarColor:this.myAvatarColor,isHost:!1}),this.didPlayerEnterRoom=!0,this.getExistingPresenceSet(),this.subscribeToQuizRoomChEvents(),this.setUpMyChannel()},getExistingPresenceSet(){this.myQuizRoomCh.presence.get(((e,t)=>{if(e)console.log(e);else for(let i=0;i<t.length;i++){let{nickname:e,avatarColor:n,isHost:s}=t[i].data;s?this.hostNickname=e:this.onlinePlayersArr.push({clientId:t[i].clientId,nickname:e,avatarColor:n,isHost:s})}}))},playerAnswer(e){this.clickedPlayerQuestionIndex=e.questionIndex,this.clickedPlayerAnswerIndex=e.playerAnswerIndex}},async created(){this.quizRoomCode=this.$route.query.quizCode,await Ge().get("/checkRoomStatus?quizCode="+this.quizRoomCode).then((e=>{this.isRoomClosed=e.data.isRoomClosed})),this.myQuizRoomCh=this.realtime.channels.get(`${this.quizRoomCode}:primary`),this.myAvatarColor="#"+Math.random().toString(16).slice(-6)},beforeUnmount(){this.myQuizRoomCh&&this.myQuizRoomCh.presence.leave(),this.questionTimer=30}};const Oe=(0,u.Z)(je,[["render",D],["__scopeId","data-v-60d91b2f"]]);var Ye=Oe;const Fe=e=>((0,s.dD)("data-v-5afc9f04"),e=e(),(0,s.Cn)(),e),Ve={key:0,class:"host-home card"},Me={class:"img-header"},Be={href:"https://www.ably.com/",target:"_blank"},Ze=["src"],$e={class:"card-body home-text"},Ke=Fe((()=>(0,s._)("h5",{class:"card-title"},"Hello Quizmaster!",-1))),Je=Fe((()=>(0,s._)("p",{class:"card-text"}," You can use this app to upload your own quiz questions and host a live quiz for any number of participants. As the host, you'll be able to see the live stats at all times and will have full control of the quiz during the live game. You can try it out by hosting a randomly chosen quiz! ",-1))),Xe=Fe((()=>(0,s._)("p",{class:"card-text"}," You can share your screen with the participants while they answer the questions via their mobile browsers for best experience. ",-1))),et={key:1,class:"mobile-msg"},tt=(0,s.Uk)(" It looks like you are on a mobile browser, please switch to a desktop to host this quiz."),it=Fe((()=>(0,s._)("br",null,null,-1))),nt=(0,s.Uk)(" Your audience can participate on mobile browsers though. "),st=[tt,it,nt],ot=Fe((()=>(0,s._)("div",{class:"card-footer text-muted footer-black"},[(0,s._)("a",{href:"https://github.com/Srushtika/realtime-quiz-framework",target:"_blank",class:"link"},"Learn how to build your own realtime quiz app with Ably →")],-1)));function rt(e,t,i,n,o,r){const a=(0,s.up)("CreateQuizRoom");return(0,s.wg)(),(0,s.iD)("div",null,[o.isTypeChosen?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ve,[(0,s._)("div",Me,[(0,s._)("a",Be,[(0,s._)("img",{src:o.headerImgLink,class:"card-img-top",alt:"Header image"},null,8,Ze)])]),(0,s._)("div",$e,[Ke,Je,Xe,r.isSmallWidth?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("button",{class:"btn",id:"btn-1",type:"submit",onClick:t[0]||(t[0]=e=>r.setQuizType("CustomQuiz"))}," Create your own quiz "),(0,s._)("button",{class:"btn",type:"submit",onClick:t[1]||(t[1]=e=>r.setQuizType("RandomQuiz"))}," Host a randomly chosen quiz ")],64)),r.isSmallWidth?((0,s.wg)(),(0,s.iD)("small",et,st)):(0,s.kq)("",!0)]),ot])),o.isTypeChosen?((0,s.wg)(),(0,s.j4)(a,{key:1,realtime:i.realtime,ablyClientId:i.ablyClientId,quizType:o.quizType,showHome:r.showHome},null,8,["realtime","ablyClientId","quizType","showHome"])):(0,s.kq)("",!0)])}const at=e=>((0,s.dD)("data-v-39628b1c"),e=e(),(0,s.Cn)(),e),lt={key:0,class:"host-home card"},ut={key:0,class:"card-body"},dt={class:"card-title"},ct={key:0},ht=at((()=>(0,s._)("p",{class:"card-text"}," You can add your own quiz questions in Google Sheets and host a live quiz. Simply make a copy of the template and fill it with your data. ",-1))),mt={class:"sheets-template"},wt=["href"],yt={class:"card-text template-instructions"},bt=(0,s.Uk)(" After you've prepared the questions and answers, you need to do two things: "),pt=at((()=>(0,s._)("br",null,null,-1))),gt=(0,s.Uk)(" 1. Copy the URL of your sheet from the browser's address bar and paste it in the field below "),kt=["disabled"],vt=(0,s.Uk)(" 2. Make your Google sheet publicly available by going to File > Publish to the web > Publish. You might be presented with a different shareable URL, you can ignore that. "),Ct=at((()=>(0,s._)("p",{class:"card-text"}," We need a nickname for you so the players of your quiz can identify you ",-1))),ft=["disabled"],qt=["disabled"],zt={key:1,class:"alert alert-danger sheet-error",role:"alert"},At={key:1,class:"card-body"},Qt=at((()=>(0,s._)("h2",{class:"card-title"},"Your quiz room is ready",-1))),_t=at((()=>(0,s._)("p",{class:"card-text"}," Invite your players to join by sharing this link ",-1))),Rt={key:0,class:"far fa-copy"},It=at((()=>(0,s._)("hr",null,null,-1))),Pt={key:0},xt=at((()=>(0,s._)("hr",null,null,-1))),Tt={class:"card-footer text-muted div-black"},Lt={key:1,class:"d-flex bd-highlight"},St={class:"question-flex bd-highlight"},Nt={class:"stats-flex bd-highlight"},Dt={key:1},Ht={key:2,class:"quizEnded"},Et=at((()=>(0,s._)("div",{class:"text-white end-msg"},[(0,s._)("h6",null,"The quiz has ended"),(0,s._)("h1",{class:"display-4"},"Congratulations to the winners 🎉🎉🎉")],-1)));function Ut(e,t,i,o,r,a){const l=(0,s.up)("OnlinePlayers"),u=(0,s.up)("Question"),d=(0,s.up)("LiveStats"),c=(0,s.up)("Leaderboard"),h=(0,s.up)("AdminPanel");return(0,s.wg)(),(0,s.iD)("div",null,[r.showQuestions?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",lt,[r.isRoomReady?((0,s.wg)(),(0,s.iD)("div",At,[Qt,_t,(0,s._)("button",{type:"button",class:"btn",onClick:t[4]||(t[4]=e=>a.copyPlayerInviteLink())},[(0,s.Uk)((0,m.zw)(r.copyBtnText)+" ",1),r.copyClicked?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("i",Rt))]),It,(0,s.Wm)(l,{timer:r.timer,onlinePlayersArr:r.onlinePlayersArr,didHostStartGame:r.didHostStartGame},null,8,["timer","onlinePlayersArr","didHostStartGame"]),r.onlinePlayersArr.length>0?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[r.didHostStartGame?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Pt,[xt,(0,s._)("button",{type:"button",class:"btn",onClick:t[5]||(t[5]=e=>a.startQuiz())}," Start the quiz ")]))],64)):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",ut,[(0,s._)("h2",dt," Host "+(0,m.zw)("CustomQuiz"===i.quizType?"your own ":"a randomly chosen ")+" quiz ",1),"CustomQuiz"==i.quizType?((0,s.wg)(),(0,s.iD)("div",ct,[ht,(0,s._)("div",mt,[(0,s._)("a",{class:"orange-txt",href:r.templateCopyURL,target:"_blank",role:"button"}," Get the Google Sheets template",8,wt),(0,s._)("p",yt,[bt,pt,gt,(0,s.wy)((0,s._)("input",{class:"form-control input-box",placeholder:"Add the URL to your sheet","onUpdate:modelValue":t[0]||(t[0]=e=>r.sheetURL=e),disabled:r.createBtnClicked},null,8,kt),[[n.nr,r.sheetURL]]),vt])])])):(0,s.kq)("",!0),Ct,(0,s.wy)((0,s._)("input",{class:"form-control input-box",placeholder:"Enter nickname","onUpdate:modelValue":t[1]||(t[1]=e=>r.hostNickname=e),disabled:r.createBtnClicked,onKeyup:t[2]||(t[2]=(0,n.D2)((e=>a.createQuizRoom()),["enter"]))},null,40,ft),[[n.nr,r.hostNickname]]),(0,s._)("button",{type:"button create-random-btn",class:"btn",onClick:t[3]||(t[3]=e=>a.createQuizRoom()),disabled:r.createBtnClicked},(0,m.zw)(r.btnText),9,qt),r.sheetURLErr?((0,s.wg)(),(0,s.iD)("div",zt," There is a problem with the URL to your sheet. Please recheck it per the instructions above, refresh this page and try again. You can reach out to support@ably.com for further assistance. ")):(0,s.kq)("",!0)])),(0,s._)("div",Tt,[(0,s._)("button",{type:"button",class:"btn btn-link back-btn",onClick:t[6]||(t[6]=e=>i.showHome())}," ← Go back ")])])),r.showQuestions&&!r.showFinalScreen?((0,s.wg)(),(0,s.iD)("div",Lt,[(0,s._)("div",St,[(0,s.Wm)(u,{newQuestion:r.newQuestion,newChoices:r.newChoices,newQuestionNumber:r.newQuestionNumber,isLastQuestion:r.isLastQuestion,questionTimer:r.questionTimer,correctAnswerIndex:r.correctAnswerIndex,showImg:r.showImg,questionImgLink:r.questionImgLink,isAdminView:!0,correctAnswer:r.newChoices[r.correctAnswerIndex],showAnswer:r.showAnswer},null,8,["newQuestion","newChoices","newQuestionNumber","isLastQuestion","questionTimer","correctAnswerIndex","showImg","questionImgLink","correctAnswer","showAnswer"])]),(0,s._)("div",Nt,[r.showAnswer?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(d,{key:0,numAnswered:r.numAnswered,numPlaying:r.numPlaying},null,8,["numAnswered","numPlaying"])),r.showAnswer?((0,s.wg)(),(0,s.iD)("div",Dt,[(0,s.Wm)(c,{leaderboard:r.leaderboard,isPlayer:!1,finalScreen:!1},null,8,["leaderboard"]),(0,s.Wm)(h,{hostAdminCh:r.hostAdminCh,prevQuestionNumber:r.newQuestionNumber,onEndQuizNow:t[7]||(t[7]=e=>a.endQuizNow())},null,8,["hostAdminCh","prevQuestionNumber"])])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0),r.showFinalScreen?((0,s.wg)(),(0,s.iD)("div",Ht,[Et,(0,s.Wm)(c,{leaderboard:r.leaderboard,isPlayer:!1,finalScreen:!0},null,8,["leaderboard"])])):(0,s.kq)("",!0)])}const Wt=e=>((0,s.dD)("data-v-002967ae"),e=e(),(0,s.Cn)(),e),Gt={class:"alert alert-secondary admin-panel",role:"alert"},jt=Wt((()=>(0,s._)("h4",{class:"alert-heading"},"Host control panel",-1))),Ot=Wt((()=>(0,s._)("hr",null,null,-1))),Yt=Wt((()=>(0,s._)("br",null,null,-1)));function Ft(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)("div",Gt,[jt,Ot,(0,s._)("button",{type:"button",class:"btn btn-dark btn-next",onClick:t[0]||(t[0]=e=>r.showNextQuestion())}," Show next question "),Yt,(0,s._)("button",{type:"button",class:"btn btn-link end-btn",onClick:t[1]||(t[1]=e=>r.endQuizNow())}," End quiz and show results ")])}var Vt={name:"AdminPanel",props:["hostAdminCh","prevQuestionNumber"],methods:{showNextQuestion(){this.hostAdminCh.publish("next-question",{prevQIndex:this.prevQuestionNumber-1})},endQuizNow(){this.hostAdminCh.publish("end-quiz-now",{end:!0}),this.$emit("end-quiz-now")}}};const Mt=(0,u.Z)(Vt,[["render",Ft],["__scopeId","data-v-002967ae"]]);var Bt=Mt,Zt=i(5870),$t={name:"QuizType",props:["resetCmpFn","realtime","quizType","showHome"],components:{Question:ue,AdminPanel:Bt,LiveStats:xe,Leaderboard:Ue,OnlinePlayers:fe},data(){return{globalQuizChName:"main-quiz-thread",globalQuizCh:null,myQuizRoomCode:this.getRandomRoomId(),myQuizRoomCh:null,hostAdminCh:"a",hostNickname:null,btnText:"Create my quiz room",createBtnClicked:!1,isRoomReady:!1,playerLinkBase:window.location.href+"play",playerLink:null,copyBtnText:"Copy shareable link",copyClicked:!1,onlinePlayersArr:[],didHostStartGame:!1,timer:null,showQuestions:!1,newQuestionNumber:null,newQuestion:null,newChoices:[],isLastQuestion:null,questionTimer:30,correctAnswerIndex:null,showAnswer:!1,numAnswered:0,numPlaying:0,leaderboard:null,templateCopyURL:"https://docs.google.com/spreadsheets/d/12_Cnv86fI4JOnJq5t9BQmxiPTNZgMsd0PP7Sbjm7WkQ/copy?usp=sharing",sheetURL:"",sheetURLErr:!1,customQuizQuestions:null,showImg:!1,questionImgLink:null,showFinalScreen:!1}},methods:{createQuizRoom(){if(this.createBtnClicked=!0,"RandomQuiz"===this.quizType)this.btnText="Creating your quiz room...";else{this.btnText="Loading your questions and creating your quiz room...";let e=new RegExp("/spreadsheets/d/([a-zA-Z0-9-_]+)").exec(this.sheetURL)[1];if(null==e||null==this.sheetURL)return void(this.sheetURLErr=!0);const t={sheetId:e,sheetNumber:1,returnAllResults:!0};Zt(t,(e=>{this.customQuizQuestions=e}),(e=>{this.sheetURLErr=!0,console.log(e)}))}this.waitForGameRoom(),this.enterMainThread()},waitForGameRoom(){this.myQuizRoomCh=this.realtime.channels.get(`${this.myQuizRoomCode}:primary`),this.hostAdminCh=this.realtime.channels.get(`${this.myQuizRoomCode}:host`),this.myQuizRoomCh.subscribe("thread-ready",(()=>{this.handleQuizRoomReady()}))},handleQuizRoomReady(){if(this.isRoomReady=!0,this.globalQuizCh.detach(),this.enterGameRoomAndSubscribeToEvents(),this.playerLink=`${this.playerLinkBase}?quizCode=${this.myQuizRoomCode}`,"CustomQuiz"==this.quizType){let e=this.customQuizQuestions;this.hostAdminCh.publish("quiz-questions",{questions:e})}},enterGameRoomAndSubscribeToEvents(){this.myQuizRoomCh.presence.enter({nickname:this.hostNickname,avatarColor:this.myAvatarColor,isHost:!0,quizType:this.quizType}),this.subscribeToRoomChEvents()},enterMainThread(){this.globalQuizCh=this.realtime.channels.get(this.globalQuizChName),this.globalQuizCh.presence.enter({nickname:this.hostNickname,roomCode:this.myQuizRoomCode})},getRandomRoomId(){return"room-"+Math.random().toString(36).substr(2,8)},subscribeToRoomChEvents(){this.myQuizRoomCh.subscribe("new-player",(e=>{this.handleNewPlayerEntered(e)})),this.myQuizRoomCh.subscribe("start-quiz-timer",(e=>{this.didHostStartGame=!0,this.timer=e.data.countDownSec})),this.myQuizRoomCh.subscribe("new-question",(e=>{this.handleNewQuestionReceived(e)})),this.myQuizRoomCh.subscribe("question-timer",(e=>{this.questionTimer=e.data.countDownSec,this.questionTimer<0&&(this.questionTimer=30)})),this.myQuizRoomCh.subscribe("correct-answer",(e=>{this.handleCorrectAnswerReceived(e)})),this.myQuizRoomCh.subscribe("live-stats-update",(e=>{this.numAnswered=e.data.numAnswered,this.numPlaying=e.data.numPlaying})),this.myQuizRoomCh.subscribe("full-leaderboard",(e=>{this.leaderboard=e.data.leaderboard}))},handleNewPlayerEntered(e){let{clientId:t,nickname:i,avatarColor:n,isHost:s}=e.data.newPlayerState;s||this.onlinePlayersArr.push({clientId:t,nickname:i,avatarColor:n,isHost:s})},handleNewQuestionReceived(e){this.showAnswer=!1,this.showQuestions=!0,this.newQuestionNumber=e.data.questionNumber,this.newQuestion=e.data.question,this.newChoices=e.data.choices,this.isLastQuestion=e.data.isLastQuestion,this.numAnswered=e.data.numAnswered,this.numPlaying=e.data.numPlaying,this.showImg=e.data.showImg,this.questionImgLink=e.data.imgLink},handleCorrectAnswerReceived(e){this.showAnswer=!0,this.newQuestionNumber==e.data.questionNumber&&(this.correctAnswerIndex=e.data.correctAnswerIndex),this.isLastQuestion&&(this.showFinalScreen=!0)},copyPlayerInviteLink(){this.copyClicked=!0,this.copyBtnText="Copied!",setTimeout((()=>{this.copyClicked=!1,this.copyBtnText="Copy shareable link"}),2e3),navigator.clipboard.writeText(this.playerLink)},startQuiz(){this.hostAdminCh.publish("start-quiz",{start:!0})},endQuizNow(){this.showFinalScreen=!0}},beforeUnmount(){this.myQuizRoomCh&&this.myQuizRoomCh.presence.leave(),this.questionTimer=30}};const Kt=(0,u.Z)($t,[["render",Ut],["__scopeId","data-v-39628b1c"]]);var Jt=Kt,Xt={props:["realtime","ablyClientId"],data(){return{isTypeChosen:!1,headerImgLink:"https://user-images.githubusercontent.com/5900152/108396467-c713bc00-720e-11eb-95d8-a5f9e571b153.png",quizType:"",windowWidth:window.innerWidth}},components:{CreateQuizRoom:Jt},methods:{setQuizType(e){this.isTypeChosen=!0,this.quizType=e},showHome(){this.isTypeChosen=!1}},computed:{isSmallWidth(){return this.windowWidth>480?(console.log(this.windowWidth),!1):(console.log(this.windowWidth),!0)}}};const ei=(0,u.Z)(Xt,[["render",rt],["__scopeId","data-v-5afc9f04"]]);var ti=ei;const ii=[{path:"/play",component:Ye},{path:"/",component:ti},{path:"/about",name:"about",component:()=>i.e(443).then(i.bind(i,7381))}],ni=(0,h.p7)({history:(0,h.PO)("/quiz/"),routes:ii});var si=ni;(0,n.ri)(c).use(si).mount("#app")}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,n,s,o){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],o=e[d][2];for(var a=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var u=s();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,s,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,n){return i.f[n](e,t),t}),[]))}}(),function(){i.u=function(e){return"js/about.js"}}(),function(){i.miniCssF=function(e){}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="quiz:";i.l=function(n,s,o,r){if(e[n])e[n].push(s);else{var a,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==n||c.getAttribute("data-webpack")==t+o){a=c;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+o),a.src=n),e[n]=[s];var h=function(t,i){a.onerror=a.onload=null,clearTimeout(m);var s=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((function(e){return e(i)})),t)return t(i)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p="/quiz/"}(),function(){var e={143:0};i.f.j=function(t,n){var s=i.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var o=new Promise((function(i,n){s=e[t]=[i,n]}));n.push(s[2]=o);var r=i.p+i.u(t),a=new Error,l=function(n){if(i.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",a.name="ChunkLoadError",a.type=o,a.request=r,s[1](a)}};i.l(r,l,"chunk-"+t,t)}},i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,o,r=n[0],a=n[1],l=n[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(l)var d=l(i)}for(t&&t(n);u<r.length;u++)o=r[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},n=self["webpackChunkquiz"]=self["webpackChunkquiz"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(8383)}));n=i.O(n)})();